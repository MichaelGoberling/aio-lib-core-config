const fs=require("fs"),path=require("path"),status=Symbol.for(`aio-cli-config.dotenv`),parse=a=>{const b=new RegExp(/^\s*(.*)=\s*'((''|[^'])*)'/,"gm"),c=new RegExp(/^\s*(.*)=\s*"((""|[^"])*)"/,"gm"),d=new RegExp(/^\s*(.*)=\s*([^'"].*)$/,"gm");let e,f={};const g=fs.readFileSync(a,"utf-8");for(;e=b.exec(g);)f[e[1]]=e[2].replace(/''/g,"'");for(;e=c.exec(g);)f[e[1]]=e[2].replace(/""/g,"\"");for(;e=d.exec(g);)f[e[1]]=e[2].replace(/ #.*$/,"").trim();return f},diff=(a,b)=>Object.keys(a).filter(a=>!(a in b));module.exports=function(a){a=a||this.debug||(()=>!0);const b=path.join(process.cwd(),".env");if(!global[status])try{const c=parse(b),d=diff(c,process.env).sort();a(`loading environment variables from ${b}`),0<d.length?(process.env={...c,...process.env},a(`added environment variables: ${d.join(", ")}`)):a(`no environment variables added`)}catch(c){"ENOENT"===c.code?a(`.env file not found, skipping ...`):(a(`cannot read environment variables from ${b}`),a(` - ${c}`),a("skipping ..."))}global[status]=!0};